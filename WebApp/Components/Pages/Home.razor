@page "/"

@using System.Net.Http.Json
@using MudBlazor
@rendermode InteractiveServer
@inject TahtakaleIntegration tahtakaleIntegration


<MudDataGrid Items="@Elements" Filterable="true">
    <Columns>
        <PropertyColumn Property="x => x.Title" Filterable="true" />
        <PropertyColumn Property="x => x.Price" Title="Nr" Filterable="false" />
        <PropertyColumn Property="x => x.Description" Filterable="false" />
        <PropertyColumn Property="x => x.Quantity" Title="Molar mass" />
    </Columns>
</MudDataGrid>
@code {
    private List<Item> Elements = new List<Item>();
    HashSet<Item> _selectedItems = new();
    HashSet<Item> _filterItems = new();
    FilterDefinition<Item> _filterDefinition;
    bool _selectAll = true;
    string _icon = Icons.Material.Outlined.FilterAlt;

    bool _filterOpen = false;
    protected override async Task OnInitializedAsync()
    {
        TahtaKaleResponseDto resp = await tahtakaleIntegration.GetDataWithPaging(0, 50);
        Elements = resp.Datas;
        _selectedItems = Elements.ToHashSet();
        _filterItems = Elements.ToHashSet();
        _filterDefinition = new FilterDefinition<Item>
            {
                FilterFunction = x => _filterItems.Contains(x)
            };
    }
    void OpenFilter()
    {
        _filterOpen = true;
    }

}